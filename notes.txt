        # Update based on preview trees
        #
        # need to look at tree transform.commit and copy most as that method
        # assumes you are creating a child of the branch tip.
        #
        # need to create a preview tree, make the change the user made and
        # commit that, then compare the parent you just committed to against
        # the current tip, if the parent is the tip, then can just pull.  If
        # it isn't, then you need to merge.
        #
        # 
        merger = merge.Merger.from_revision_ids(
            None, # no progress indicator
            tree,
            old_revision_id,
            other_branch=old_branch,
            tree_branch=tree_branch)
        # see pipeline.py:656 ish
